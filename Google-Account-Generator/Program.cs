using System;
using OpenQA.Selenium;
using OpenQA.Selenium.Chrome;
using OpenQA.Selenium.Support.UI;
using static System.Net.WebRequestMethods;

class Program
{
    static void Main()
    {
        Random rnd = new Random();

        var options = new ChromeOptions();

        string url = GetProxyUrl();
        string cleanedUrl = url.Replace("http://", "");
        //1.Proxy ayarı
        var proxy = new Proxy
       {
           Kind = ProxyKind.Manual,
           IsAutoDetect = false,
           HttpProxy = cleanedUrl
           //SslProxy = "170.239.18.62:1830"
       };
        options.Proxy = proxy;

        // 2. Rastgele user-agent
        string[] userAgents = new[]
        {
            "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36",
            "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Safari/605.1.15",
            "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36"
        };
        options.AddArgument($"--user-agent={userAgents[rnd.Next(userAgents.Length)]}");


        options.AddArgument("--disable-automation");   // Bu satırı ekle
        options.AddArgument("--start-maximized");      // Tarayıcıyı max açmak istersen
        options.AddArgument("--incognito");            // Tarayıcıyı gizli mode
        options.AddArgument("--ignore-certificate-errors");
        //options.AddArgument("--headless");
        using (IWebDriver driver = new ChromeDriver(options))
        {
            GmailSignupAutomation automation = new GmailSignupAutomation();
            automation.StartGmailSignup(driver);
        }

    }

    private static string GetProxyUrl()
    {
        Random random = new Random();

        List<string> proxyList = new List<string>
        {    "http://5.45.126.128:8080",
    "http://171.228.165.145:5103",
    "http://171.228.122.89:5103",
    "http://134.209.29.120:80",
    "http://117.86.6.253:1080",
    "http://51.254.78.223:80",
    "http://185.105.102.189:80",
    "http://68.183.179.119:8888",
    "http://3.110.60.103:80",
    "http://67.43.228.251:31239",
    "http://111.202.19.28:8080",
    "http://171.228.169.65:5104",
    "http://171.228.120.79:5102",
    "http://143.42.66.91:80",
    "http://51.15.228.52:8080",
    "http://65.108.203.36:28080",
    "http://194.31.212.109:8080",
    "http://181.129.62.2:47377",
    "http://123.30.154.171:7777",
    "http://114.230.208.239:3712",
    "http://45.12.254.22:3128",
    "http://80.190.82.58:14602",
    "http://155.94.128.59:10809",
    "http://67.43.228.250:12179",
    "http://88.99.209.189:1234",
    "http://119.40.98.29:20",
    "http://45.140.143.77:18080",
    "http://8.209.255.13:3128",
    "http://63.143.57.115:80",
    "http://202.40.179.33:9090",
    "http://110.72.59.105:8085",
    "http://202.62.67.89:53281",
    "http://217.66.215.85:8080",
    "http://5.78.24.25:25290",
    "http://51.89.21.99:61530",
    "http://187.251.130.140:8080",
    "http://37.220.81.36:3785",
    "http://179.49.203.252:999",
    "http://103.154.76.2:8080",
    "http://27.76.212.94:22309",
    "http://86.127.244.34:3128",
    "http://118.113.244.77:2324",
    "http://103.130.83.46:8080",
    "http://182.53.216.4:4153",
    "http://188.132.150.242:8080",
    "http://103.167.170.199:1111",
    "http://67.43.236.19:32819",
    "http://103.156.141.218:9090",
    "http://14.224.174.168:2579",
    "http://185.25.118.24:8080",
    "http://124.248.190.213:8080",
    "http://45.71.15.97:9292",
    "http://34.102.48.89:8080",
    "http://199.102.105.242:4145",
    "http://14.241.80.37:8080",
    "http://157.66.50.61:8080",
    "http://14.224.174.168:3355",
    "http://46.161.194.88:8085",
    "http://91.210.171.209:7878",
    "http://64.227.134.174:3128",
    "http://98.64.128.182:3128",
    "http://130.193.56.133:3128",
    "http://164.163.73.5:999",
    "http://170.106.144.64:8090",
    "http://168.253.100.194:8081",
    "http://1.179.148.9:36476",
    "http://67.204.3.193:13135",
    "http://36.88.170.170:8080",
    "http://47.91.65.23:3128",
    "http://8.219.97.248:80",
    "http://103.232.228.138:8080",
    "http://37.156.46.209:8080",
    "http://199.102.104.70:4145",
    "http://175.138.75.137:8080",
    "http://171.239.139.126:1452",
    "http://115.147.34.75:8082",
    "http://111.202.18.108:8080",
    "http://78.108.108.9:8080",
    "http://181.39.48.123:999",
    "http://125.27.241.98:8080",
    "http://103.227.186.68:6080",
    "http://134.35.11.26:8080",
    "http://219.93.101.63:80",
    "http://123.183.174.69:7302",
    "http://223.205.23.229:8080",
    "http://186.96.111.214:999",
    "http://111.67.193.111:7890",
    "http://66.201.7.151:3128",
    "http://189.150.92.23:999",
    "http://181.168.88.76:8080",
    "http://38.51.243.137:9991",
    "http://14.243.149.40:8080",
    "http://102.66.104.162:8865",
    "http://111.202.19.199:8080",
    "http://115.75.184.174:8080",
    "http://103.242.105.177:8181",
    "http://92.51.126.42:8080",
    "http://181.13.205.99:999",
    "http://91.230.65.202:8080",
    "http://27.124.81.146:8080",
    "http://181.39.12.225:999",
    "http://116.108.209.75:10110",
    "http://36.37.163.113:8080",
    "http://161.49.87.222:8095",
    "http://198.199.86.11:80",
    "http://101.108.250.244:8080",
    "http://118.70.188.23:5103",
    "http://102.210.104.1:83",
    "http://80.249.112.166:80",
    "http://103.144.79.27:8080",
    "http://27.98.187.152:8080",
    "http://96.30.79.84:8081",
    "http://192.203.0.22:999",
    "http://119.252.173.26:8080",
    "http://45.171.64.19:999",
    "http://182.16.175.163:5678",
    "http://103.189.11.63:3838",
    "http://185.209.220.255:1080",
    "http://23.82.137.161:80",
    "http://8.220.141.8:808",
    "http://47.56.110.204:8989",
    "http://103.247.23.181:4319",
    "http://182.253.38.179:3128",
    "http://59.53.80.122:10024",
    "http://47.254.28.155:8081",
    "http://14.229.107.161:8080",
    "http://80.209.243.26:3111",
    "http://61.91.202.210:8080",
    "http://67.43.236.19:30145",
    "http://43.133.13.187:10809",
    "http://197.157.221.113:9999",
    "http://101.33.80.19:8888",
    "http://211.234.125.3:443",
    "http://103.173.72.34:1111",
    "http://103.226.232.164:8099",
    "http://103.156.248.13:8080",
    "http://103.172.42.105:1111",
    "http://162.223.90.150:80",
    "http://171.228.153.155:5103",
    "http://192.111.138.29:4145",
    "http://15.152.37.24:3128",
    "http://43.130.47.134:8080",
    "http://89.213.106.253:999",
    "http://181.188.238.151:999",
    "http://36.111.205.239:6666",
    "http://91.187.113.68:8080",
    "http://62.33.53.248:3128",
    "http://116.101.223.175:5102",
    "http://194.59.204.87:9080",
    "http://45.87.68.9:15321",
    "http://103.48.71.34:84",
    "http://34.48.171.130:33080",
    "http://103.187.86.24:8183",
    "http://103.247.21.236:8080",
    "http://103.175.240.87:8080",
    "http://198.145.118.251:8080",
    "http://148.222.153.6:999",
    "http://124.83.102.236:8082",
    "http://175.139.233.76:80",
    "http://103.169.148.3:1111",
    "http://216.238.75.89:999",
    "http://201.148.42.22:999",
    "http://119.3.113.150:9094",
    "http://45.224.149.109:999",
    "http://186.235.86.137:8080",
    "http://116.237.200.213:3128",
    "http://203.176.205.96:8080",
    "http://198.201.44.228:8080",
    "http://103.198.126.172:80",
    "http://45.121.139.73:8080",
    "http://182.16.48.201:8080",
    "http://134.35.10.45:8080",
    "http://27.57.72.194:8080",
    "http://172.98.4.178:3128",
    "http://103.106.14.72:8080",
    "http://103.240.198.7:3128",
    "http://80.249.112.166:80",
    "http://185.71.67.108:8080",
    "http://36.57.214.217:8080",
    "http://45.230.110.179:8080",
    "http://103.245.182.5:8080",
    "http://179.61.143.29:999",
    "http://111.249.35.100:8080",
    "http://197.252.3.98:1080",
    "http://87.251.141.195:8080",
    "http://115.231.72.92:8080",
    "http://115.128.206.185:8888",
    "http://120.205.38.30:8080",
    "http://223.99.28.163:9000",
    "http://123.157.124.134:8080",
    "http://191.102.119.10:8080",
    "http://200.107.171.174:8080",
    "http://8.222.235.39:3128",
    "http://194.124.36.15:8080",
    "http://8.217.74.245:3228",
    "http://113.23.157.35:1231",
    "http://206.189.134.250:3128",
    "http://8.213.156.191:50",
    "http://190.121.145.115:999",
    "http://34.143.143.61:7777",
    "http://183.96.222.70:18572",
    "http://60.61.204.156:8080",
    "http://126.209.13.230:8082",
    "http://113.172.154.115:1003",
    "http://188.127.231.252:4916",
    "http://185.255.4.172:2141  ",
    "http://72.10.164.178:6691  ",
    "http://8.213.156.191:5060  ",
    "http://60.187.245.53:8085  ",
    "http://218.91.55.106:3712  ",
    "http://36.95.78.156:8080   ",
    "http://47.88.59.79:82      ",
    "http://188.68.52.244:80    ",
    "http://47.251.122.81:8888  ",
    "http://154.64.215.132:999  ",
    "http://38.172.128.21:999   ",
    "http://8.213.156.191:30000 ",
    "http://52.237.96.236:8080  ",
    "http://119.3.113.151:9094  ",
    "http://37.221.193.221:32274",
    "http://113.172.154.115:1010",
    "http://176.226.228.110:8081",
    "http://65.2.44.94:80       ",
    "http://67.43.236.18:8751   ",
    "http://103.177.235.207:83  ",
    "http://202.61.204.51:80    ",
    "http://14.224.165.146:3640 ",
    "http://64.73.113.237:8081  ",
    "http://202.176.1.25:4343   ",
    "http://103.138.26.37:8080  ",
    "http://186.148.195.43:999  ",
    "http://103.53.78.165:8050  ",
    "http://185.49.25.198:8080  ",
    "http://40.76.69.94:8080    ",
    "http://117.5.17.0:5103     ",
    "http://8.220.204.92:5060   ",
    "http://14.224.165.146:2131 ",
    "http://154.85.58.149:80    ",
    "http://103.169.254.45:6080 ",
    "http://171.237.97.30:1025  ",
    "http://111.202.18.167:8080 ",
    "http://18.136.126.83:8080  ",
    "http://41.234.59.209:8080  ",
    "http://208.87.243.199:7878 ",
    "http://14.181.68.241:5104  ",
    "http://143.198.42.182:31280",
    "http://171.228.114.144:5102",
    "http://103.172.121.53:8080 ",
    "http://62.80.166.106:8888  ",
    "http://36.89.85.249:5678   ",
    "http://89.213.106.70:999   ",
    "http://116.68.162.21:1111  ",
    "http://201.150.118.26:999  ",
    "http://80.234.116.167:7788 ",
    "http://14.189.146.222:5106 ",
    "http://170.106.83.149:13001",
    "http://111.202.18.47:8080  ",
    "http://45.4.1.208:999      ",
    "http://180.103.19.147:1080 ",
    "http://64.227.130.38:3128  ",
    "http://139.9.116.150:8520  ",
    "http://139.5.152.2:57413   ",
    "http://202.5.60.46:5020    ",
    "http://111.202.19.206:8080 ",
    "http://65.182.3.154:8080   ",
    "http://185.138.120.109:8080",
    "http://103.165.40.82:8080  ",
    "http://38.242.202.236:8080 ",
    "http://65.108.203.37:28080 ",
    "http://103.215.60.234:3125 ",
    "http://95.31.42.199:3629   ",
    "http://20.13.148.109:8080  ",
    "http://103.203.234.75:8080 ",
    "http://221.191.135.10:8080 ",
    "http://180.103.19.100:1080 ",
    "http://190.61.45.71:999    ",
    "http://103.231.239.137:5808",
    "http://43.226.78.192:9999  ",
    "http://14.224.174.168:3041 ",
    "http://117.74.65.207:80    ",
    "http://38.156.75.130:8080  ",
    "http://111.119.192.73:8888 ",
    "http://27.37.98.24:8888    ",
    "http://111.202.19.98:8080  ",
    "http://185.122.204.56:31631",
    "http://117.91.61.201:3712  ",
    "http://13.114.41.225:8080  ",
    "http://45.196.241.98:8001  ",
    "http://103.168.44.65:8088  ",
    "http://72.10.160.171:4951  ",
    "http://111.202.18.121:8080 ",
    "http://189.22.234.41:80    ",
    "http://43.252.9.54:8080    ",
    "http://38.65.172.193:999   ",
    "http://14.204.105.230:8085 ",
    "http://9.223.187.19:3128   ",
    "http://157.15.82.116:8113  ",
    "http://103.174.145.46:83   ",
    "http://45.189.151.29:999   ",
    "http://200.111.232.94:8080 ",
    "http://103.247.23.242:1111 ",
    "http://137.184.174.32:4857 ",
    "http://185.73.103.23:3128  ",
    "http://103.253.127.230:3125",
    "http://160.20.129.1:1111   ",
    "http://103.156.17.27:8818  ",
    "http://201.77.96.0:999     ",
    "http://103.156.17.233:80   ",
    "http://218.75.224.4:3309   ",
    "http://193.233.251.146:8085",
    "http://67.43.236.18:3193   ",
    "http://64.227.140.246:3128 ",
    "http://103.46.11.156:7500  ",
    "http://54.93.43.77:80      ",
    "http://38.45.47.170:999    ",
    "http://34.81.72.31:80      ",
    "http://204.199.140.18:999  ",
    "http://168.121.242.75:999  ",
    "http://38.123.221.131:999  ",
    "http://178.165.42.166:3128 ",
    "http://79.127.118.57:8080  ",
    "http://116.104.189.218:5102",
    "http://119.3.113.152:9094  ",
    "http://102.0.10.54:8080    ",
    "http://190.2.143.81:8888   ",
    "http://67.43.228.252:29109 ",
    "http://45.196.241.140:8001 ",
    "http://103.97.140.247:1111 ",
    "http://134.209.29.120:3128 ",
    "http://103.142.254.240:1111",
    "http://190.14.249.111:8080 ",
    "http://103.133.27.247:8181 ",
    "http://8.146.200.53:8080   ",
    "http://78.108.41.124:9110  ",
    "http://178.178.100.188:8080",
    "http://223.205.137.182:8080",
    "http://103.147.77.204:8080 ",
    "http://101.255.119.25:8080 ",
    "http://191.81.251.94:8080  ",
    "http://157.10.97.119:8181  ",
    "http://118.70.188.17:5103  ",
    "http://8.220.205.172:4002  ",
    "http://43.206.234.136:3128 ",
    "http://103.116.82.150:8080 ",
    "http://103.82.135.154:8888 ",
    "http://160.25.48.33:9090   ",
    "http://190.111.218.139:999 ",
    "http://190.94.213.58:999   ",
    "http://49.147.66.190:8082  ",
    "http://45.87.68.7:15321    ",
    "http://14.224.165.146:2367 ",
    "http://113.172.154.115:1003",
    "http://103.227.187.193:6080",
    "http://177.53.215.19:999   ",
    "http://102.209.148.2:8080  ",
    "http://8.211.49.86:6666    ",
    "http://103.227.187.3:6080  ",
    "http://221.121.149.35:8080 ",
    "http://103.125.116.54:8885 ",
    "http://116.204.17.221:10809",
    "http://171.244.14.168:3134 ",
    "http://8.211.49.86:1088    ",
    "http://116.107.241.66:12002",
    "http://54.37.207.54:3128   ",
    "http://14.242.157.246:5104 ",
    "http://111.22.119.71:650   ",
    "http://8.211.49.86:161     ",
    "http://37.19.208.90:8080   ",
    "http://171.228.181.29:5103 ",
    "http://149.86.137.42:8080  ",
    "http://103.46.11.148:3000  ",
    "http://115.72.3.232:10004  ",
    "http://113.108.13.120:4433 ",
    "http://103.165.157.32:8080 ",
    "http://111.202.18.100:8080 ",
    "http://221.231.13.198:1080 ",
    "http://119.156.195.173:3128",
    "http://8.219.229.53:20     ",
    "http://172.188.122.92:80   ",
    "http://103.120.175.243:9191",
    "http://103.112.52.156:8765 ",
    "http://190.109.1.34:999    ",
    "http://46.161.194.83:8085  ",
    "http://135.181.154.225:80  ",
    "http://189.22.234.37:80    ",
    "http://190.2.143.81:80     ",
    "http://72.10.160.92:6339   ",
    "http://149.129.177.117:6666",
    "http://201.222.76.34:999   ",
    "http://103.169.130.202:8080",
    "http://66.23.233.210:48004 ",
    "http://45.61.122.201:6493  ",
    "http://156.155.116.71:5678 ",
    "http://212.83.143.223:64484",
    "http://103.240.7.167:8888  ",
    "http://147.182.194.76:3811 ",
    "http://185.105.102.179:80  ",
    "http://175.196.78.154:8081 ",
    "http://41.57.98.177:80     ",
    "http://103.127.23.10:5678  ",
    "http://98.28.87.38:53629   ",
    "http://115.74.11.214:25123 ",
    "http://8.210.17.35:3128    ",
    "http://49.87.33.162:8989   ",
    "http://195.252.236.91:80   ",
    "http://162.0.220.214:49643 ",
    "http://67.43.228.253:1379  ",
    "http://183.6.7.103:4145    ",
    "http://158.180.52.194:1080 ",
    "http://190.210.62.131:6473 ",
    "http://45.224.22.63:9991   ",
    "http://192.252.209.155:1445",
    "http://106.122.195.221:5711",
    "http://41.242.69.196:5678  ",
    "http://104.37.135.145:4145 ",
    "http://45.142.193.35:31342 ",
    "http://47.238.128.246:3128 ",
    "http://157.230.250.185:2127",
    "http://198.12.251.108:46107",
    "http://1.0.213.97:8080     ",
    "http://5.196.247.77:8080   ",
    "http://47.89.159.212:11    ",
    "http://69.197.167.74:6062  ",
    "http://47.27.100.109:8081  ",
    "http://203.10.59.50:8080   ",
    "http://107.173.0.174:3128  ",
    "http://222.89.65.154:8080  ",
    "http://61.112.102.29:3389  ",
    "http://185.147.125.145:5124",
    "http://114.226.2.170:8118  ",
    "http://8.220.204.215:8008  ",
    "http://103.215.207.85:83   ",
    "http://121.228.89.200:3128 ",
    "http://80.234.18.177:7788  ",
    "http://171.248.99.153:5106 ",
    "http://47.251.87.199:8008  ",
    "http://122.146.95.183:4145 ",
    "http://161.125.154.236:1080",
    "http://65.16.147.196:445   ",
    "http://109.182.58.76:80    ",
    "http://72.10.164.178:5133  ",
    "http://185.42.12.45:33238  ",
    "http://103.197.48.49:9898  ",
    "http://108.175.23.49:13135 ",
    "http://212.83.138.172:40435",
    "http://109.121.17.90:4531  ",
    "http://168.194.171.16:999  ",
    "http://104.223.222.42:6639 ",
    "http://117.74.65.207:25565 ",
    "http://202.40.185.145:100  ",
    "http://91.243.92.20:8085   ",
    "http://192.206.202.1:8080  ",
    "http://103.124.137.99:13808",
    "http://93.184.166.54:8661  ",
    "http://72.10.160.171:26119 ",
    "http://38.170.173.65:7616  ",
    "http://199.116.114.11:4145 ",
    "http://192.111.130.5:17002 ",
    "http://103.165.239.142:8088",
    "http://27.210.192.165:81   ",
    "http://40.254.8.113:8081   ",
    "http://77.65.50.118:34159  ",
    "http://103.17.90.6:5678    ",
    "http://164.81.179.246:1080 ",
    "http://194.26.229.46:20018 ",
    "http://149.28.214.203:10699",
    "http://200.23.246.200:80   ",
    "http://62.106.84.155:3128  ",
    "http://67.213.212.48:12066 ",
    "http://98.188.47.132:4145  ",
    "http://189.41.126.114:1080 ",
    "http://49.0.2.243:5430     ",
    "http://109.197.55.234:1080 ",
    "http://216.222.31.41:1337  ",
    "http://62.26.99.84:80      ",
    "http://103.91.232.1:4145   ",
    "http://67.43.227.228:1271  ",
    "http://89.38.97.60:12110   ",
    "http://5.178.49.226:8080   ",
    "http://152.53.36.109:44362 ",
    "http://177.8.113.61:26302  ",
    "http://65.233.127.125:8080 ",
    "http://182.204.177.156:1080",
    "http://115.144.36.55:5374  ",
    "http://147.135.223.135:1515",
    "http://148.72.212.125:28982",
    "http://50.62.58.158:44134  ",
    "http://192.151.150.174:2301",
    "http://119.60.38.86:10800  ",
    "http://212.83.143.103:21563",
    "http://202.134.231.222:5135",
    "http://47.251.74.38:8081   ",
    "http://67.43.236.20:29141  ",
    "http://171.6.162.78:4153   ",
    "http://114.49.83.82:3128   ",
    "http://1.34.120.197:51873  ",
    "http://210.183.233.72:3128 ",
    "http://10.227.255.251:7263 ",
    "http://180.178.104.109:5678",
    "http://184.181.217.210:4145",
    "http://192.111.139.163:1940",
    "http://38.45.102.112:2333  ",
    "http://197.150.45.80:8081  ",
    "http://88.119.165.46:9816  ",
    "http://174.138.176.78:56566",
    "http://85.239.234.94:3220  ",
    "http://187.95.82.109:3629  ",
    "http://66.29.129.54:59322  ",
    "http://87.247.40.2:5678    ",
    "http://103.88.169.6:3629   ",
    "http://102.165.125.102:5678",
    "http://194.150.68.7:7010   ",
    "http://45.32.132.158:14475 ",
    "http://182.204.176.128:1080",
    "http://123.206.129.195:808 ",
    "http://108.181.132.115:5979",
    "http://58.69.161.62:8082   ",
    "http://202.51.103.154:5678 ",
    "http://54.146.246.86:80    ",
    "http://62.103.186.66:4153  ",
    "http://8.213.128.6:8118    ",
    "http://50.228.141.102:80   ",
    "http://190.184.144.222:5678",
    "http://75.119.207.152:36621",
    "http://51.38.64.38:19888   ",
    "http://54.121.209.174:3128 ",
    "http://109.212.145.183:443 ",
    "http://172.99.187.33:4145  ",
    "http://223.231.109.35:8080 ",
    "http://72.195.34.35:27360  ",
    "http://36.95.235.18:3629   ",
    "http://208.109.14.49:35618 ",
    "http://8.161.171.156:8080  ",
    "http://69.30.227.194:20288 ",
    "http://67.213.212.53:11671 ",
    "http://182.204.180.14:1080 ",
    "http://72.10.160.170:27991 ",
    "http://181.13.217.208:4153 ",
    "http://89.163.210.170:4857 ",
    "http://67.213.212.40:13236 ",
    "http://209.159.153.19:36270",
    "http://212.83.137.239:10150",
    "http://184.178.172.18:15280",
    "http://213.212.204.204:1976",
    "http://112.2.21.18:51080   ",
    "http://45.224.119.74:999   ",
    "http://103.121.195.12:61221",
    "http://47.250.177.202:8008 ",
    "http://198.8.94.174:39078  ",
    "http://93.190.139.246:12319",
    "http://162.0.220.218:29947 ",
    "http://18.132.201.250:3128 ",
    "http://20.206.200.163:3128 ",
    "http://50.238.47.86:32100  ",
    "http://58.18.39.58:10800   ",
    "http://87.121.49.238:4145  ",
    "http://51.83.116.7:35280   ",
    "http://89.58.45.94:44926   ",
    "http://109.167.206.121:3944",
    "http://89.58.45.94:43277   ",
    "http://34.220.150.223:8080 ",
    "http://178.62.7.98:34621   ",
    "http://37.44.238.2:57167   ",
    "http://196.20.125.145:8083 ",
    "http://45.131.6.124:80     ",
    "http://199.102.106.94:4145 ",
    "http://113.160.132.195:8080",
    "http://111.72.195.223:2324 ",
    "http://72.10.160.171:28755 ",
    "http://206.155.214.188:80  ",
    "http://46.249.123.26:8080  ",
    "http://110.78.146.136:8080 ",
    "http://103.105.40.1:4145   ",
    "http://123.200.5.146:57775 ",
    "http://95.111.228.159:3128 ",
    "http://45.128.133.241:1080 ",
    "http://37.120.162.180:45500",
    "http://152.53.36.109:33870 ",
    "http://185.83.144.132:60096",
    "http://160.116.237.92:3128 ",
    "http://162.214.102.121:5267",
    "http://222.124.15.124:8080 ",
    "http://8.215.3.250:8080    ",
    "http://31.43.33.55:4153    ",
    "http://131.161.68.38:35944 ",
    "http://117.86.6.195:8089   ",
    "http://23.222.59.246:80    ",
    "http://103.156.248.240:8085",
    "http://49.67.131.211:1080  ",
    "http://45.167.95.182:999   ",
    "http://45.91.92.45:33471   ",
    "http://4.149.210.7:3128    ",
    "http://184.178.172.26:4145 ",
    "http://89.187.170.35:80    ",
    "http://125.27.107.212:8080 ",
    "http://163.204.245.176:9999",
    "http://47.238.134.126:8443 ",
    "http://213.74.223.77:4153  ",
    "http://177.38.245.110:55713",
    "http://49.67.128.134:8089  ",
    "http://27.189.131.130:8089 ",
    "http://36.90.25.188:8080   ",
    "http://103.82.37.125:8888  ",
    "http://103.213.218.6:36694 ",
    "http://162.240.236.212:1449",
    "http://103.122.64.150:8080 ",
    "http://103.233.152.18:8080 ",
    "http://208.113.154.54:50827",
    "http://27.79.165.17:16000  ",
    "http://111.72.128.30:2324  ",
    "http://90.182.147.170:4145 ",
    "http://45.91.92.45:11947   ",
    "http://185.174.210.198:4145",
    "http://43.157.23.83:11210  ",
    "http://162.241.125.171:5580",
    "http://116.104.3.245:1080  ",
    "http://157.15.51.14:8080   ",
    "http://67.43.236.20:7969   ",
    "http://8.220.141.8:8443    ",
    "http://50.63.13.3:48329    ",
    "http://94.131.7.1:31556    ",
    "http://116.97.36.190:4006  ",
    "http://154.73.28.79:8080   ",
    "http://5.101.168.150:10232 ",
    "http://190.103.205.253:9097",
    "http://103.130.218.135:5970",
    "http://92.205.28.187:57704 ",
    "http://37.221.161.46:3128  ",
    "http://98.175.31.195:4145  ",
    "http://84.128.124.158:8080 ",
    "http://125.87.81.179:8989  ",
    "http://209.159.153.20:52241",
    "http://95.182.78.18:5678   ",
    "http://188.130.129.216:3001",
    "http://68.225.17.237:4228  ",
    "http://111.111.108.141:3128",
    "http://95.216.29.204:13959 ",
    "http://47.91.110.148:9080  ",
    "http://103.51.45.9:4145    ",
    "http://177.141.54.178:3128 ",
    "http://148.72.212.125:47586",
    "http://173.212.237.43:34332",
    "http://103.189.254.78:2222 ",
    "http://103.156.16.190:8818 ",
    "http://185.141.227.216:3128",
    "http://185.215.160.120:6505",
    "http://49.67.128.182:8089  ",
    "http://103.156.86.131:1080 ",
    "http://111.132.16.17:3389  ",
    "http://103.161.69.217:8469 ",
    "http://176.33.13.54:3310   ",
    "http://141.98.206.21:1453  ",
    "http://118.70.16.27:6868   ",
    "http://78.46.212.196:2033  ",
    "http://189.124.91.145:7171 ",
    "http://164.90.242.76:3128  ",
    "http://46.60.15.62:8080    ",
    "http://170.245.158.76:8080 ",
    "http://36.255.86.113:83    ",
    "http://38.188.100.17:999   ",
    "http://171.41.128.167:2324 ",
    "http://36.50.112.145:8080  ",
    "http://45.191.7.249:8080   ",
    "http://36.90.24.2:8080     ",
    "http://5.35.99.100:3128    ",
    "http://202.10.40.207:8080  ",
    "http://164.70.95.127:3128  ",
    "http://111.132.17.123:3389 ",
    "http://111.72.198.105:2324 ",
    "http://111.132.16.11:3389  ",
    "http://103.195.65.139:6000 ",
    "http://175.158.40.224:2020 ",
    "http://118.68.114.73:10003 ",
    "http://177.129.249.170:8080",
    "http://103.159.96.121:8080 ",
    "http://79.106.231.17:8080  ",
    "http://102.220.13.208:8080 ",
    "http://103.159.96.141:8080 ",
    "http://103.159.96.95:8080  ",
    "http://15.235.132.246:8080 ",
    "http://103.159.96.146:3128 ",
    "http://111.132.16.97:3389  ",
    "http://27.189.135.108:8089 ",
    "http://78.46.212.196:1021  ",
    "http://114.91.26.39:2324   ",
    "http://88.42.237.102:8080  ",
    "http://111.132.16.69:3389  ",
    "http://103.167.170.22:1111 ",
    "http://111.132.16.156:3389 ",
    "http://111.132.16.70:3389  ",
    "http://188.247.61.234:8080 ",
    "http://171.41.130.174:2324 ",
    "http://38.66.207.9:999     ",
    "http://58.219.241.53:3389  ",
    "http://222.68.37.97:1080   ",
    "http://125.87.82.171:2324  ",
    "http://111.132.16.238:3389 ",
    "http://38.240.45.111:3128  ",
    "http://178.153.241.108:8080",
    "http://222.68.36.181:2324  ",
    "http://94.141.99.147:3128  ",
    "http://38.65.172.4:999     ",
    "http://102.222.51.105:8080 ",
    "http://45.86.6.62:8080     ",
    "http://200.63.107.118:8089 ",
    "http://222.68.37.224:2324  ",
    "http://222.68.36.252:2324  ",
    "http://222.67.10.71:2324   ",
    "http://94.249.221.93:49200 ",
    "http://196.0.111.194:34638 ",
    "http://111.72.193.66:2324  ",
    "http://37.26.86.206:47464  ",
    "http://103.168.254.33:8080 ",
    "http://14.143.130.210:80   ",
    "http://103.176.96.185:8082 ",
    "http://194.150.71.0:7060   ",
    "http://222.68.37.75:1080   ",
    "http://103.169.139.13:8081 ",
    "http://49.0.43.238:39930   ",
    "http://157.20.98.74:1111   ",
    "http://49.71.105.203:8888  ",
    "http://45.119.55.157:3128  ",
    "http://190.95.132.189:999  ",
    "http://103.126.87.144:8081 ",
    "http://196.251.222.233:8083",
    "http://222.67.8.254:1080   ",
    "http://118.113.245.112:2324",
    "http://114.91.25.59:1080   ",
    "http://103.134.222.186:8080",
    "http://103.235.152.170:5741",
    "http://45.149.93.123:9999  ",
    "http://222.70.146.212:1080 ",
    "http://203.161.30.139:8070 ",
    "http://103.30.181.182:8080 ",
    "http://141.11.241.127:8080 ",
    "http://103.243.177.129:8080",
    "http://222.67.12.40:1080   ",
    "http://222.67.12.185:1080  ",
    "http://114.91.24.229:1080  ",
    "http://45.70.236.194:999   ",
    "http://202.136.89.142:27503",
    "http://141.136.56.104:999  ",
    "http://172.232.121.132:8080",
    "http://103.145.132.16:8080 ",
    "http://182.204.181.77:1080 ",
    "http://94.249.220.135:49200",
    "http://222.67.8.128:1080   ",
    "http://103.67.84.146:8080  ",
    "http://186.148.31.19:999   ",
    "http://222.68.38.82:2324   ",
    "http://222.68.37.46:2324   ",
    "http://222.68.39.0:2324    ",
    "http://222.68.38.14:1080   ",
    "http://117.3.64.126:10001  ",
    "http://172.235.29.87:8080  ",
    "http://27.147.175.115:8080 ",
    "http://209.97.163.81:8888  ",
    "http://103.190.60.28:9090  ",
    "http://114.91.25.83:1080   ",
    "http://103.148.130.6:8080  ",
    "http://43.249.143.166:8080 ",
    "http://203.111.253.103:8080",
    "http://102.222.62.111:8080 ",
    "http://102.213.241.70:8080 ",
    "http://154.73.29.129:8080  ",
    "http://103.149.238.106:8080",
    "http://45.86.6.137:8080    ",
    "http://103.154.25.126:8080 ",
    "http://179.107.159.103:8080",
    "http://103.48.70.81:83     ",
    "http://222.70.145.9:1080   ",
    "http://222.68.37.254:2324  ",
    "http://222.68.38.115:1080  ",
    "http://103.245.205.226:6969",
    "http://182.204.179.34:1080 ",
    "http://41.65.236.47:1976   ",
    "http://222.68.42.88:1080   ",
    "http://222.68.41.137:2324  ",
    "http://154.65.39.7:80      ",
    "http://154.65.39.8:80      ",
    "http://148.230.195.165:6969",
    "http://2.179.193.146:80    ",
    "http://188.132.150.37:8080 ",
    "http://36.77.217.161:8081  ",
    "http://111.72.194.201:2324 ",
    "http://197.232.85.163:8080 ",
    "http://103.179.252.167:8181",
    "http://103.191.115.252:82  ",
    "http://181.78.21.74:999    ",
    "http://103.147.246.185:3127",
    "http://38.159.227.130:999  ",
    "http://222.68.36.25:1080   ",
    "http://182.204.182.147:1080",
    "http://103.219.75.2:8080   ",
    "http://115.147.63.59:8081  ",
    "http://160.22.22.89:3125   ",
    "http://36.37.224.125:8080  ",
    "http://2.186.114.66:8080   ",
    "http://177.72.156.75:8080  ",
    "http://216.158.246.90:51012",
    "http://38.255.23.131:999   ",
    "http://58.187.175.215:16000",
    "http://27.79.248.34:16000  ",
    "http://161.97.136.251:3128 ",
    "http://103.162.54.203:8080 ",
    "http://186.26.92.180:58339 ",
    "http://103.247.23.181:1111 ",
    "http://27.79.164.240:16000 ",
    "http://119.2.48.12:9669    ",
    "http://27.79.239.226:16000 ",
    "http://111.132.16.22:3389  ",
    "http://27.79.156.251:1600  "
};

        string randomProxy = proxyList[random.Next(proxyList.Count)].Trim();

        return randomProxy;
    }
    public class GmailSignupAutomation
    {
        public void StartGmailSignup(IWebDriver driver)
        {
            try
            {
                //driver = ChangeIP();
                Random random = new Random();
                WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));

                driver.Manage().Cookies.DeleteAllCookies();
                driver.Navigate().GoToUrl("https://accounts.google.com/signup");
                Thread.Sleep(3000); // Wait for page to load

                // Ad
                var (firstName, lastName) = GenerateRandomName();

                var firstNameInput = driver.FindElement(By.Id("firstName"));
                SlowType(firstNameInput, firstName);
                Thread.Sleep(random.Next(800, 2000)); // Bekleme


                var lastNameInput = driver.FindElement(By.Id("lastName"));
                SlowType(lastNameInput, lastName);
                Thread.Sleep(random.Next(1000, 2000)); // Bekleme


                driver.FindElement(By.XPath("//span[contains(text(),'Next')]")).Click();
                Thread.Sleep(4000);

                // Doğum Ayı

                string[] months = { "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" };
                string randomMonth = months[random.Next(months.Length)];
                var monthElement = driver.FindElement(By.Id("month"));
                Thread.Sleep(random.Next(700, 1000)); // Bekleme
                new SelectElement(monthElement).SelectByText(randomMonth);

                // Gün
                string day = random.Next(1, 28).ToString();
                Thread.Sleep(random.Next(500, 900)); // Bekleme

                var dayInput = driver.FindElement(By.Id("day"));
                SlowType(dayInput, day);


                // Yıl

                string year = random.Next(1970, 2000).ToString();
                Thread.Sleep(random.Next(800, 1400)); // Bekleme
                var yearInput = driver.FindElement(By.Id("year"));
                SlowType(yearInput, year);

                // Cinsiyet
                string[] genderOptions = { "Rather not say", "Male", "Female" };

                var genderElement = driver.FindElement(By.Id("gender"));
                string selectedGender = genderOptions[random.Next(genderOptions.Length)];
                var select = new SelectElement(genderElement);
                Thread.Sleep(random.Next(500, 1200));
                select.SelectByText(selectedGender);

                driver.FindElement(By.XPath("//span[contains(text(),'Next')]")).Click();
                Thread.Sleep(random.Next(100, 800));

                if (IsErrorPresent(driver))
                {
                    IWebElement elementOne = driver.FindElement(By.Id("selectionc1"));
                    IWebElement elementTwo = driver.FindElement(By.Id("selectionc2"));

                    // Choose one randomly
                    IWebElement selectedElement = random.Next(2) == 0 ? elementOne : elementTwo;
                    Thread.Sleep(5000);
                    // Öğeyi tıklıyoruz
                    selectedElement.Click();
                    string elementText = selectedElement.Text;

                    driver.FindElement(By.XPath("//span[contains(text(),'Next')]")).Click();
                    Thread.Sleep(7000);

                }
                else
                {
                    // Kullanıcı adı
                    IWebElement usernameField = driver.FindElement(By.CssSelector("input[name='Username']"));
                    var username = GenerateUniqueUsername(firstName, lastName);
                    SlowType(usernameField, username);

                    driver.FindElement(By.XPath("//span[contains(text(),'Next')]")).Click();
                    Thread.Sleep(random.Next(300, 900));
                }

                string password = CreatePassword();
                // Şifre
                var passwordField = driver.FindElement(By.CssSelector("input[name='Passwd']"));
                Thread.Sleep(random.Next(300, 900));
                //passwordField.SendKeys(password);
                SlowType(passwordField, password);


                IWebElement passwordAgainField = driver.FindElement(By.CssSelector("input[name='PasswdAgain']"));
                Thread.Sleep(random.Next(200, 700));
                //passwordAgainField.SendKeys(password);
                SlowType(passwordAgainField, password);

                driver.FindElement(By.XPath("//span[contains(text(),'Next')]")).Click();
                Thread.Sleep(random.Next(300, 900));

                // Hata kontrolü
                if (IsErrorPresent(driver))
                {
                    Console.WriteLine("Error detected, restarting from the beginning...");
                    RestartSignupFlow(driver);
                    driver.Manage().Cookies.DeleteAllCookies();

                    return;
                }

                // Telefon Numarası
                //driver.FindElement(By.Id("phoneNumberId")).SendKeys("phoneNumber");
                //driver.FindElement(By.XPath("//span[contains(text(),'Next')]")).Click();
                //Thread.Sleep(2000);

                //Console.WriteLine("SMS doğrulama ve CAPTCHA ekranındasın.");
                Console.ReadLine(); // Manuel müdahale için beklet
            }
            catch (Exception ex)
            {
                Console.WriteLine("Exception occurred: " + ex.Message);
            }
            finally
            {
                driver.Quit();
            }
        }

        public static void SlowType(IWebElement element, string text)
        {
            Random rnd = new Random();
            foreach (char c in text)
            {
                element.SendKeys(c.ToString());
                Thread.Sleep(rnd.Next(100, 200));
            }
        }
        public static string GenerateUniqueUsername(string firstName, string lastName)
        {
            Random random = new Random();

            // Normalize: lowercase and remove whitespace
            firstName = firstName.Trim().ToLower();
            lastName = lastName.Trim().ToLower();

            // Generate 3-5 digit random number
            int randomDigits = random.Next(100, 10000); // e.g., 3 or 4 digits

            // Option 1: Combine name, surname and digits
            string username = $"{firstName}.{lastName}{randomDigits}";

            // Option 2 (alternative pattern): Use first letter of name + surname + digits
            // string username = $"{firstName[0]}{lastName}{randomDigits}";

            return username;
        }
        public static string CreatePassword()
        {
            Random random = new Random();

            int digit = random.Next(8, 10);

            string words = "9ABCD2EF3G3HI1JK1LM4N5OPR4ST7U6VY7ZWX8";
            string password = "";
            for (int i = 0; i < digit; i++)
            {
                password += words[random.Next(words.Length)];
            }
            return password;
        }
        private bool IsErrorPresent(IWebDriver driver)
        {
            try
            {
                var errorElement = driver.FindElement(By.XPath("//span[@jsslot='']"));
                return errorElement.Text.Contains("Error") || errorElement.Text.Contains("Choose your Gmail address");
            }
            catch (NoSuchElementException)
            {
                return false;
            }
        }
        private void RestartSignupFlow(IWebDriver driver)
        {
            driver.Manage().Cookies.DeleteAllCookies();
            driver.Navigate().GoToUrl("https://accounts.google.com/signup");
            Thread.Sleep(2000);
            StartGmailSignup(driver); // Recursive restart
        }
        public static (string firstName, string lastName) GenerateRandomName()
        {
            // Predefined lists of first names and last names
            string[] firstNames = { "Liam", "Ava", "Ethan", "Sophie", "Maxwell", "Isla", "Oliver", "Maya", "Lucas", "Clara" };
            string[] lastNames = { "Harrington", "Windham", "Carver", "McAllister", "Prescott", "Fitzgerald", "Hawthorne", "Blackburn", "Vance", "Montgomery" };

            // Initialize random object
            Random random = new Random();

            // Get a random first name and last name
            string firstName = firstNames[random.Next(firstNames.Length)];
            string lastName = lastNames[random.Next(lastNames.Length)];

            // Return as a tuple
            return (firstName, lastName);
        }
    }
}